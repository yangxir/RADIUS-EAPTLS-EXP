{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"\ud83c\udf0d Welcome to My Blog | \u6b22\u8fce\u6765\u5230\u6211\u7684\u535a\u5ba2 | \u79c1\u306e\u30d6\u30ed\u30b0\u3078\u3088\u3046\u3053\u305d","text":""},{"location":"#yang-xirui","title":"Yang XiRui","text":"<p>\ud83c\udf93 Wireless Network Research | Tohoku University | EAP-TLS, WiFi Security \ud83d\udc19 GitHub | \ud83d\udcf0 Zhihu \u77e5\u4e4e | \ud83d\udcd6 Xiaohongshu \u5c0f\u7ea2\u4e66 </p> <p>\ud83c\udf93 \u65e0\u7ebf\u7f51\u7edc\u7814\u7a76 | \u4e1c\u5317\u5927\u5b66 | EAP-TLS\u3001WiFi \u5b89\u5168 \ud83d\udc19 GitHub | \ud83d\udcf0 \u77e5\u4e4e | \ud83d\udcd6 \u5c0f\u7ea2\u4e66 </p> <p>\ud83c\udf93 \u7121\u7dda\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u7814\u7a76 | \u6771\u5317\u5927\u5b66 | EAP-TLS\u3001WiFi\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3 \ud83d\udc19 GitHub | \ud83d\udcf0 \u77e5\u4e4e | \ud83d\udcd6 \u5c0f\u7d05\u66f8 </p>"},{"location":"#featured-articles","title":"\ud83d\ude80 Featured Articles | \u7f6e\u9876\u6587\u7ae0 | \u6ce8\u76ee\u8a18\u4e8b","text":"<p>\ud83d\udd10 EAP-TLS Authentication Process | EAP-TLS \u8ba4\u8bc1\u5168\u6d41\u7a0b | EAP-TLS\u8a8d\u8a3c\u30d7\u30ed\u30bb\u30b9</p>"},{"location":"footer/","title":"Footer","text":"<p>\u00a9 2025 yangxir | EAP-TLS RADIUS Experiments \ud83d\udce7 Contact: yangxir@example.com \ud83d\udccc Hosted on GitHub Pages</p>"},{"location":"en/","title":"\ud83c\udf0d Welcome to My Blog","text":""},{"location":"en/#yang-xirui","title":"Yang XiRui","text":"<p>\ud83c\udf93 Wireless Network Research | Tohoku University | EAP-TLS, WiFi Security \ud83d\udc19 GitHub | \ud83d\udcf0 Zhihu | \ud83d\udcd6 Xiaohongshu</p>"},{"location":"en/#featured-articles","title":"\ud83d\ude80 Featured Articles","text":"<p>\ud83d\udd10 Complete EAP-TLS Authentication Process</p>"},{"location":"en/#categories","title":"\ud83d\udcda Categories","text":"<p>\ud83c\udde8\ud83c\uddf3 Chinese Documentation</p> <p>\ud83c\uddef\ud83c\uddf5 Japanese Documentation</p> <p>\ud83c\uddfa\ud83c\uddf8 English Documentation</p>"},{"location":"en/eap-tls/","title":"\ud83d\udce1 EAP-TLS RADIUS Experiments","text":"<p>A complete guide to setting up FreeRADIUS with EAP-TLS authentication. Learn how to deploy a secure and scalable authentication system with FreeRADIUS.</p>"},{"location":"en/eap-tls/#project-overview","title":"\ud83d\ude80 Project Overview","text":"<p>This project provides a step-by-step guide on setting up EAP-TLS authentication in FreeRADIUS, including: - \u2705 Installing FreeRADIUS - \ud83d\udd11 Generating EAP-TLS Certificates - \u2699\ufe0f Configuring the RADIUS Server - \ud83d\udce1 Connecting Wireless Clients - \ud83d\udee0 Debugging and Troubleshooting</p> <p>\ud83c\udf0d Switch languages using the navigation bar at the top.</p>"},{"location":"en/eap-tls/#experiment-environment","title":"\ud83d\udee0 Experiment Environment","text":"Component Description \ud83d\udda5\ufe0f Ubuntu VM RADIUS server environment \ud83d\udce1 Router Wireless access point (AP) \ud83d\udcf1 Redmi K50 Wireless client for authentication \ud83e\udde9 Wi-Fi Adapter For debugging and packet capture"},{"location":"en/eap-tls/#useful-resources","title":"\ud83d\udd17 Useful Resources","text":"<p>\ud83d\udccc FreeRADIUS Official Docs \ud83d\udd17 FreeRADIUS.org</p> <p>\ud83d\udccc Certificate Authority &amp; Security \ud83d\udd17 Let's Encrypt</p> <p>\ud83d\udccc Project GitHub Repository \ud83d\udd17 yangxir/RADIUS-EAPTLS-EXP</p>"},{"location":"en/eap-tls/proxy_issues/","title":"\ud83d\udce1 RADIUS Proxy Server Authentication Guide","text":""},{"location":"en/eap-tls/proxy_issues/#1-role-of-the-proxy-server","title":"\ud83d\udccc 1. Role of the Proxy Server","text":""},{"location":"en/eap-tls/proxy_issues/#why-is-a-proxy-server-needed","title":"\ud83d\udd39 Why is a Proxy Server Needed?","text":"<p>In the RADIUS authentication architecture, Proxy Server is mainly used to forward authentication requests rather than processing authentication directly. Its core role is to ensure that client authentication requests can reach the final RADIUS server in a distributed environment.</p> <p>Proxy Server is essential in the following scenarios: - Enterprise WiFi authentication (e.g., Eduroam multi-site roaming) - Multi-level RADIUS authentication (e.g., ISP authentication systems) - Cross-national/cross-regional WiFi authentication (authentication forwarding between RADIUS servers in different countries)</p>"},{"location":"en/eap-tls/proxy_issues/#2-proxy-server-workflow","title":"\ud83d\udce1 2. Proxy Server Workflow","text":"<p>1\ufe0f\u20e3 Client sends an EAP-TLS authentication request 2\ufe0f\u20e3 Proxy Server receives the request and forwards it to the final RADIUS Server 3\ufe0f\u20e3 RADIUS Server processes the authentication request and returns the result 4\ufe0f\u20e3 Proxy Server sends the result back to the client 5\ufe0f\u20e3 Client successfully connects to WiFi \ud83c\udf89  </p>"},{"location":"en/eap-tls/proxy_issues/#3-proxy-server-configuration","title":"\u2699\ufe0f 3. Proxy Server Configuration","text":""},{"location":"en/eap-tls/proxy_issues/#31-device-environment","title":"\ud83d\udccd 3.1 Device Environment","text":"Device Role IP Address MiniPC-1 Authentication Client (EAP-TLS) <code>192.168.8.220</code> Router (GL-AXT1800-83b-5G) Connects all devices, Proxy acts as RADIUS server N/A MiniPC-2 Proxy Server (Forwards RADIUS authentication requests) <code>192.168.8.182</code> PC (RADIUS Server) Authentication Server (FreeRADIUS 3.0.26) <code>192.168.8.195</code>"},{"location":"en/eap-tls/proxy_issues/#32-ensure-proxy-server-can-connect-to-radius-server","title":"\ud83d\udccd 3.2 Ensure Proxy Server Can Connect to RADIUS Server","text":"<p>Test UDP 1812 Port Connectivity</p> <pre><code>nc -zvu 192.168.8.195 1812\n</code></pre> <p>\u2705 UDP port 1812 is reachable, indicating Proxy Server can communicate with RADIUS Server.</p>"},{"location":"en/eap-tls/proxy_issues/#33-configure-proxy-server","title":"\ud83d\udccd 3.3 Configure Proxy Server","text":""},{"location":"en/eap-tls/proxy_issues/#1-modify-proxyconf","title":"\ud83d\udd39 1. Modify <code>proxy.conf</code>","text":"<pre><code>proxy_requests = yes\n\nrealm DEFAULT {\n    type = radius\n    authhost = 192.168.8.195:1812\n    accthost = 192.168.8.195:1813\n    secret = shared_secret_key\n}\n</code></pre> <p>\u2705 Ensure Proxy Server acts only as a \"relay\" and not a \"local authentication\" server</p>"},{"location":"en/eap-tls/proxy_issues/#2-configure-radius-server-to-allow-proxy","title":"\ud83d\udd39 2. Configure RADIUS Server to Allow Proxy","text":"<p>Add Proxy Server to <code>clients.conf</code>:</p> <pre><code>client 192.168.8.182 {\n    secret = shared_secret_key\n    shortname = proxy\n}\n</code></pre> <p>\u2705 Ensure the <code>secret</code> is consistent between Proxy Server and RADIUS Server to avoid errors</p>"},{"location":"en/eap-tls/proxy_issues/#3-start-radius-server-and-proxy-server","title":"\ud83d\udd39 3. Start RADIUS Server and Proxy Server","text":"<pre><code>systemctl restart freeradius\n</code></pre> <p>View logs:</p> <pre><code>journalctl -u freeradius -f\n</code></pre> <p>\u2705 Ensure services are running normally without errors</p>"},{"location":"en/eap-tls/proxy_issues/#4-conducting-eap-tls-authentication-test","title":"\ud83d\udee0 4. Conducting EAP-TLS Authentication Test","text":""},{"location":"en/eap-tls/proxy_issues/#41-configure-eap-tls-client","title":"\ud83d\udccc 4.1 Configure EAP-TLS Client","text":"<p>Create <code>eapol_test.conf</code>:</p> <pre><code>network={\n    ssid=\"GL-AXT1800-83b-5G\"\n    key_mgmt=WPA-EAP\n    eap=TLS\n    identity=\"testuser\"\n    anonymous_identity=\"testuser\"\n    ca_cert=\"/home/user/ca.crt\"\n    client_cert=\"/home/user/client.crt\"\n    private_key=\"/home/user/client.key\"\n    private_key_passwd=\"\"\n}\n</code></pre>"},{"location":"en/eap-tls/proxy_issues/#42-run-eap-tls-authentication","title":"\ud83d\udccc 4.2 Run EAP-TLS Authentication","text":"<pre><code>eapol_test -c ~/eapol_test.conf -s shared_secret_key -a 192.168.8.182 -p 1812\n</code></pre> <p>\u2705 Proxy Server forwards the request to RADIUS Server, completing authentication</p>"},{"location":"en/eap-tls/proxy_issues/#5-issues-and-solutions","title":"\u2705 5. Issues and Solutions","text":""},{"location":"en/eap-tls/proxy_issues/#1-proxy-server-did-not-forward-requests-correctly","title":"\ud83d\udd34 1. Proxy Server Did Not Forward Requests Correctly","text":""},{"location":"en/eap-tls/proxy_issues/#issue","title":"\u274c Issue","text":"<ul> <li>The Proxy Server did not forward the EAP-TLS authentication request but handled authentication locally instead.</li> <li>No authentication request forwarding was found in the <code>radiusd -X</code> logs.</li> </ul>"},{"location":"en/eap-tls/proxy_issues/#solution","title":"\u2705 Solution","text":"<ol> <li>Enable proxy forwarding <code>ini    proxy_requests = yes</code></li> <li>Ensure <code>realm</code> configuration in <code>proxy.conf</code> is correct <code>ini    realm DEFAULT {        type = radius        authhost = 192.168.8.195:1812        accthost = 192.168.8.195:1813        secret = shared_secret_key        auth_pool = my_auth_failover  # Replace with your own configuration    }</code></li> <li>Restart FreeRADIUS <code>sh    systemctl restart freeradius</code> \u2705 Successfully forwarded EAP-TLS authentication requests to the RADIUS Server! \ud83c\udf89</li> </ol>"},{"location":"en/eap-tls/proxy_issues/#2-certificate-chain-error","title":"\ud83d\udd34 2. Certificate Chain Error","text":""},{"location":"en/eap-tls/proxy_issues/#issue_1","title":"\u274c Issue","text":"<ul> <li><code>eapol_test</code> authentication failed, with logs showing:   <code>Certificate chain - 1 cert(s) untrusted</code></li> <li>RADIUS Server logs showed:   <code>TLS Alert read: warning: unknown CA</code></li> </ul>"},{"location":"en/eap-tls/proxy_issues/#solution_1","title":"\u2705 Solution","text":"<ol> <li>Ensure <code>eap.conf</code> on the RADIUS Server is configured correctly <code>ini    tls-config tls-common {        private_key_file = /etc/freeradius/3.0/certs/server.key        certificate_file = /etc/freeradius/3.0/certs/server.pem        ca_file = /etc/freeradius/3.0/certs/ca.pem    }</code></li> <li>Import the CA certificate on the client <code>sh    scp root@192.168.8.195:/etc/freeradius/3.0/certs/ca.crt ~/Desktop/</code> \u2705 Certificates successfully matched, authentication passed! \ud83c\udf89</li> </ol>"},{"location":"en/eap-tls/proxy_issues/#6-future-optimization-directions","title":"\ud83d\udccc 6. Future Optimization Directions","text":"<ul> <li>\ud83c\udf0d Multi-level Proxy Authentication Testing: Attempt secondary forwarding of authentication requests</li> <li>\ud83d\udcca Authentication Delay Optimization: Measure additional latency introduced by Proxy Server</li> <li>\ud83d\udd10 Certificate Management Optimization: Simplify client certificate import process to ensure automatic trust of RADIUS CA  </li> </ul>"},{"location":"en/eap-tls/proxy_issues/#references","title":"\ud83d\udccc References","text":"<ul> <li>\ud83d\udcd6 FreeRADIUS Official Documentation: https://freeradius.org/</li> <li>\ud83d\udcd6 Eduroam Authentication Guide: NII MeatWiki</li> </ul>"},{"location":"en/eap-tls/setup/","title":"EAP-TLS RADIUS Server on Ubuntu","text":"<p>This project provides a guide to setting up an EAP-TLS authentication FreeRADIUS server on Ubuntu, including: - Installing FreeRADIUS - Generating EAP-TLS Certificates - Configuring RADIUS Server - Connecting Client Devices - Debugging and Troubleshooting</p>"},{"location":"en/eap-tls/setup/#experiment-environment","title":"\ud83d\ude80 Experiment Environment","text":"<ol> <li>Ubuntu Virtual Machine (as the RADIUS server).</li> <li>Router (as the wireless access point).</li> <li>Redmi K50 Smartphone (as the wireless client).</li> <li>Wireless Network Adapter (for debugging or packet capture).</li> </ol>"},{"location":"en/eap-tls/setup/#1-installing-freeradius","title":"\ud83d\udccc 1. Installing FreeRADIUS","text":"<pre><code>sudo apt update &amp;&amp; sudo apt install freeradius freeradius-utils -y\n</code></pre> <p>Check if the RADIUS server is running:</p> <pre><code>sudo systemctl status freeradius\n</code></pre> <p>If not started:</p> <pre><code>sudo systemctl enable --now freeradius\n</code></pre>"},{"location":"en/eap-tls/setup/#2-configuring-freeradius","title":"\ud83d\udccc 2. Configuring FreeRADIUS","text":""},{"location":"en/eap-tls/setup/#modify-clientsconf","title":"Modify <code>clients.conf</code>","text":"<pre><code>sudo nano /etc/freeradius/3.0/clients.conf\n</code></pre> <p>Add the following entry (\u26a0\ufe0f Replace <code>192.168.51.2</code> with your router's IP \u26a0\ufe0f):</p> <pre><code>client your_router {\n    ipaddr = 192.168.51.2  \n    secret = testing123  \n    shortname = router  \n}\n</code></pre>"},{"location":"en/eap-tls/setup/#enable-eap-module","title":"Enable EAP Module","text":"<pre><code>sudo nano /etc/freeradius/3.0/mods-enabled/eap\n</code></pre> <p>Ensure the following configuration:</p> <pre><code>eap {\n    default_eap_type = tls\n}\n\ntls-config tls-common {\n    private_key_file = /etc/freeradius/3.0/certs/server.key\n    certificate_file = /etc/freeradius/3.0/certs/server.crt\n    CA_file = /etc/freeradius/3.0/certs/ca.crt\n    dh_file = /etc/freeradius/3.0/certs/dh\n    random_file = /dev/urandom\n}\n</code></pre> <p>\u26a0\ufe0f Since my certificates are stored here, you need to replace them with your own certificate paths!</p>"},{"location":"en/eap-tls/setup/#3-generating-certificates","title":"\ud83d\udccc 3. Generating Certificates","text":"<p>Create the certificate directory (if it does not exist):</p> <pre><code>sudo mkdir -p /etc/freeradius/3.0/certs\ncd /etc/freeradius/3.0/certs\n</code></pre>"},{"location":"en/eap-tls/setup/#generate-ca-certificate","title":"Generate CA Certificate","text":"<pre><code>sudo openssl genrsa -out ca.key 2048\nsudo openssl req -x509 -new -nodes -key ca.key -sha256 -days 365 -out ca.crt -subj \"/C=JP/ST=Miyagi/L=Sendai/O=Tohoku University/OU=Goto Lab/CN=CA\"\n</code></pre>"},{"location":"en/eap-tls/setup/#generate-server-certificate","title":"Generate Server Certificate","text":"<pre><code>sudo openssl genrsa -out server.key 2048\nsudo openssl req -new -key server.key -out server.csr -subj \"/C=JP/ST=Miyagi/L=Sendai/O=Tohoku University/OU=Goto Lab/CN=radius-server.local\"\nsudo openssl x509 -req -in server.csr -CA ca.crt -CAkey ca.key -CAcreateserial -out server.crt -days 365 -sha256\n</code></pre>"},{"location":"en/eap-tls/setup/#generate-client-certificate","title":"Generate Client Certificate","text":"<pre><code>sudo openssl genrsa -out client.key 2048\nsudo openssl req -new -key client.key -out client.csr -subj \"/C=JP/ST=Miyagi/L=Sendai/O=Tohoku University/OU=Goto Lab/CN=client\"\nsudo openssl x509 -req -in client.csr -CA ca.crt -CAkey ca.key -CAcreateserial -out client.crt -days 365 -sha256\n</code></pre> <p>\u26a0\ufe0f Note: The above commands include information such as \"Tohoku University\" and \"Goto Lab,\" which are specific to my research lab. Please replace them with your own organization details!</p>"},{"location":"en/eap-tls/setup/#create-pkcs12-client-certificate-for-mobile-import","title":"Create PKCS#12 Client Certificate (For Mobile Import)","text":"<pre><code>sudo openssl pkcs12 -export -inkey client.key -in client.crt -certfile ca.crt -out client.p12\n</code></pre>"},{"location":"en/eap-tls/setup/#4-start-freeradius-and-test","title":"\ud83d\udccc 4. Start FreeRADIUS and Test","text":"<pre><code>sudo systemctl restart freeradius\nsudo journalctl -u freeradius -f\n</code></pre> <p>Test authentication using <code>radtest</code>:</p> <pre><code>radtest user password 127.0.0.1 0 testing123\n</code></pre> <p>If successful, it should return <code>Access-Accept</code>.</p>"},{"location":"en/eap-tls/setup/#5-connect-wireless-clients","title":"\ud83d\udccc 5. Connect Wireless Clients","text":""},{"location":"en/eap-tls/setup/#prepare-client-certificates","title":"Prepare Client Certificates","text":"<ol> <li>Copy <code>client.p12</code> and <code>ca.crt</code> to your smartphone (e.g., using Google Drive).</li> <li>Import the certificates on Android/iPhone:</li> <li>Go to Wi-Fi Advanced Settings, select EAP-TLS authentication.</li> <li>Choose <code>client.p12</code> as the client certificate.</li> <li>Choose <code>ca.crt</code> as the CA certificate.</li> </ol>"},{"location":"en/eap-tls/setup/#6-configure-router","title":"\ud83d\udccc 6. Configure Router","text":"<ol> <li>Open your router management interface.</li> <li>In Wireless Security or Advanced Settings, enable WPA2-Enterprise (EAP-TLS).</li> <li>Set up the RADIUS server address:</li> <li>RADIUS Server IP: <code>Your RADIUS Server IP</code></li> <li>Port: <code>1812</code></li> <li>Secret: <code>testing123</code> (This must match the <code>secret</code> value in <code>clients.conf</code>)</li> </ol> <p>\ud83d\udccc Ensure the RADIUS shared key in <code>clients.conf</code> matches your router configuration</p> <pre><code>client your_router {\n    ipaddr = 192.168.51.2  # Replace with your router IP\n    secret = testing123    # RADIUS shared secret\n    shortname = router     # Alias for easier identification\n}\n</code></pre> <p>\u26a0\ufe0f Note: If the <code>secret</code> in <code>clients.conf</code> does not match the router configuration, RADIUS authentication will fail!</p>"},{"location":"en/eap-tls/setup/#license","title":"\ud83d\udcdc License","text":"<p>This project is licensed under the MIT License. You are free to use and modify it. If you reference or further develop this project, please acknowledge the source.</p>"},{"location":"en/eap-tls/setup/#references","title":"\ud83d\udcda References","text":"<p>This project is based on the following resources: - FreeRADIUS Official Website: https://www.freeradius.org/ - NII Academic Authentication Promotion Office - Eduroam &amp; RADIUS Documentation: NII MeatWiki</p>"},{"location":"en/eap-tls/setup/#contact","title":"\ud83d\udce9 Contact","text":"<p>If you have any questions or suggestions, please submit an issue or visit my GitHub page:</p> <p>\ud83d\udd17 GitHub Profile </p> <p>If you find this project useful, please consider giving it a Star \u2b50!</p>"},{"location":"ja/","title":"\ud83c\udf0d \u79c1\u306e\u30d6\u30ed\u30b0\u3078\u3088\u3046\u3053\u305d","text":""},{"location":"ja/#yang-xirui","title":"Yang XiRui","text":"<p>\ud83c\udf93 \u7121\u7dda\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u7814\u7a76 | \u6771\u5317\u5927\u5b66 | EAP-TLS\u3001WiFi\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3 \ud83d\udc19 GitHub | \ud83d\udcf0 \u77e5\u4e4e | \ud83d\udcd6 \u5c0f\u7d05\u66f8</p>"},{"location":"ja/#_2","title":"\ud83d\ude80 \u6ce8\u76ee\u8a18\u4e8b","text":"<p>\ud83d\udd10 \u5b8c\u5168\u306aEAP-TLS\u8a8d\u8a3c\u30d7\u30ed\u30bb\u30b9</p>"},{"location":"ja/#_3","title":"\ud83d\udcda \u30ab\u30c6\u30b4\u30ea\u30fc","text":"<p>\ud83c\udde8\ud83c\uddf3 \u4e2d\u56fd\u8a9e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8</p> <p>\ud83c\uddef\ud83c\uddf5 \u65e5\u672c\u8a9e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8</p> <p>\ud83c\uddfa\ud83c\uddf8 \u82f1\u8a9e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8</p>"},{"location":"ja/eap-tls/","title":"\ud83d\udce1 EAP-TLS RADIUS \u8a8d\u8a3c\u5b9f\u9a13","text":"<p>FreeRADIUS \u306e EAP-TLS \u8a8d\u8a3c\u3092\u69cb\u7bc9\u3059\u308b\u305f\u3081\u306e\u5b8c\u5168\u30ac\u30a4\u30c9 \u5b89\u5168\u3067\u30b9\u30b1\u30fc\u30e9\u30d6\u30eb\u306a\u8a8d\u8a3c\u30b7\u30b9\u30c6\u30e0 \u3092 FreeRADIUS \u3067\u69cb\u7bc9\u3059\u308b\u65b9\u6cd5\u3092\u5b66\u3073\u307e\u3059\u3002</p>"},{"location":"ja/eap-tls/#_1","title":"\ud83d\ude80 \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u6982\u8981","text":"<p>\u3053\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3067\u306f\u3001EAP-TLS \u8a8d\u8a3c\u306e\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u624b\u9806 \u3092\u8a73\u3057\u304f\u8aac\u660e\u3057\u3066\u3044\u307e\u3059\uff1a - \u2705 FreeRADIUS \u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb - \ud83d\udd11 EAP-TLS \u8a3c\u660e\u66f8\u306e\u4f5c\u6210 - \u2699\ufe0f RADIUS \u30b5\u30fc\u30d0\u30fc\u306e\u8a2d\u5b9a - \ud83d\udce1 \u7121\u7dda\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u306e\u63a5\u7d9a - \ud83d\udee0 \u30c7\u30d0\u30c3\u30b0\u3068\u30c8\u30e9\u30d6\u30eb\u30b7\u30e5\u30fc\u30c6\u30a3\u30f3\u30b0</p> <p>\ud83c\udf0d \u4e0a\u90e8\u306e\u30ca\u30d3\u30b2\u30fc\u30b7\u30e7\u30f3\u30d0\u30fc\u3067\u8a00\u8a9e\u3092\u5207\u308a\u66ff\u3048\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002</p>"},{"location":"ja/eap-tls/#_2","title":"\ud83d\udee0 \u5b9f\u9a13\u74b0\u5883","text":"\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8 \u8aac\u660e \ud83d\udda5\ufe0f Ubuntu \u4eee\u60f3\u30de\u30b7\u30f3 RADIUS \u30b5\u30fc\u30d0\u30fc\u74b0\u5883 \ud83d\udce1 \u30eb\u30fc\u30bf\u30fc \u7121\u7dda\u30a2\u30af\u30bb\u30b9\u30dd\u30a4\u30f3\u30c8 \ud83d\udcf1 Redmi K50 \u30b9\u30de\u30fc\u30c8\u30d5\u30a9\u30f3 \u7121\u7dda\u30af\u30e9\u30a4\u30a2\u30f3\u30c8 \ud83e\udde9 Wi-Fi \u30a2\u30c0\u30d7\u30bf\u30fc \u30c7\u30d0\u30c3\u30b0\u3068\u30d1\u30b1\u30c3\u30c8\u30ad\u30e3\u30d7\u30c1\u30e3\u7528"},{"location":"ja/eap-tls/#_3","title":"\ud83d\udd17 \u53c2\u8003\u8cc7\u6599","text":"<p>\ud83d\udccc FreeRADIUS \u516c\u5f0f\u30b5\u30a4\u30c8 \ud83d\udd17 FreeRADIUS.org</p> <p>\ud83d\udccc \u8a3c\u660e\u66f8\u8a8d\u8a3c\u3068\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3 \ud83d\udd17 Let's Encrypt</p> <p>\ud83d\udccc GitHub \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30da\u30fc\u30b8 \ud83d\udd17 yangxir/RADIUS-EAPTLS-EXP</p>"},{"location":"ja/eap-tls/proxy_issues/","title":"\ud83d\udce1 RADIUS \u30d7\u30ed\u30ad\u30b7\u30b5\u30fc\u30d0\u30fc\u8a8d\u8a3c\u30ac\u30a4\u30c9","text":""},{"location":"ja/eap-tls/proxy_issues/#1","title":"\ud83d\udccc 1. \u30d7\u30ed\u30ad\u30b7\u30b5\u30fc\u30d0\u30fc\u306e\u5f79\u5272","text":""},{"location":"ja/eap-tls/proxy_issues/#_1","title":"\ud83d\udd39 \u306a\u305c\u30d7\u30ed\u30ad\u30b7\u30b5\u30fc\u30d0\u30fc\u304c\u5fc5\u8981\u306a\u306e\u304b\uff1f","text":"<p>RADIUS \u8a8d\u8a3c\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u3067\u306f\u3001\u30d7\u30ed\u30ad\u30b7\u30b5\u30fc\u30d0\u30fc \u306f \u8a8d\u8a3c\u8981\u6c42\u3092\u8ee2\u9001 \u3059\u308b\u305f\u3081\u306b\u4f7f\u7528\u3055\u308c\u3001\u76f4\u63a5\u8a8d\u8a3c\u3092\u51e6\u7406\u3059\u308b\u308f\u3051\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3002\u305d\u306e\u4e3b\u306a\u5f79\u5272\u306f\u3001\u5206\u6563\u74b0\u5883 \u306b\u304a\u3044\u3066\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u306e\u8a8d\u8a3c\u8981\u6c42\u304c\u6700\u7d42\u7684\u306a RADIUS \u30b5\u30fc\u30d0\u30fc\u306b\u5230\u9054\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\u3053\u3068\u3067\u3059\u3002</p> <p>\u30d7\u30ed\u30ad\u30b7\u30b5\u30fc\u30d0\u30fc\u306f\u4ee5\u4e0b\u306e\u30b7\u30ca\u30ea\u30aa\u3067 \u91cd\u8981 \u3067\u3059\uff1a - \u4f01\u696d\u306e WiFi \u8a8d\u8a3c\uff08\u4f8b: Eduroam \u30de\u30eb\u30c1\u30b5\u30a4\u30c8 \u30ed\u30fc\u30df\u30f3\u30b0\uff09 - \u591a\u6bb5\u968e\u306e RADIUS \u8a8d\u8a3c\uff08\u4f8b: ISP \u8a8d\u8a3c\u30b7\u30b9\u30c6\u30e0\uff09 - \u56fd\u5883\u3092\u8d8a\u3048\u305f WiFi \u8a8d\u8a3c\uff08\u7570\u306a\u308b\u56fd\u306e RADIUS \u30b5\u30fc\u30d0\u30fc\u9593\u3067\u306e\u8a8d\u8a3c\u8ee2\u9001\uff09</p>"},{"location":"ja/eap-tls/proxy_issues/#2","title":"\ud83d\udce1 2. \u30d7\u30ed\u30ad\u30b7\u30b5\u30fc\u30d0\u30fc\u306e\u30ef\u30fc\u30af\u30d5\u30ed\u30fc","text":"<p>1\ufe0f\u20e3 \u30af\u30e9\u30a4\u30a2\u30f3\u30c8 \u304c EAP-TLS \u8a8d\u8a3c\u8981\u6c42\u3092\u9001\u4fe1 2\ufe0f\u20e3 \u30d7\u30ed\u30ad\u30b7\u30b5\u30fc\u30d0\u30fc \u304c\u8981\u6c42\u3092\u53d7\u4fe1\u3057\u3001\u6700\u7d42\u7684\u306a RADIUS \u30b5\u30fc\u30d0\u30fc\u306b\u8ee2\u9001 3\ufe0f\u20e3 RADIUS \u30b5\u30fc\u30d0\u30fc \u304c\u8a8d\u8a3c\u8981\u6c42\u3092\u51e6\u7406\u3057\u3001\u7d50\u679c\u3092\u8fd4\u3059 4\ufe0f\u20e3 \u30d7\u30ed\u30ad\u30b7\u30b5\u30fc\u30d0\u30fc \u304c\u7d50\u679c\u3092\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u306b\u9001\u4fe1 5\ufe0f\u20e3 \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u304c WiFi \u306b\u6b63\u5e38\u306b\u63a5\u7d9a \ud83c\udf89  </p>"},{"location":"ja/eap-tls/proxy_issues/#3","title":"\u2699\ufe0f 3. \u30d7\u30ed\u30ad\u30b7\u30b5\u30fc\u30d0\u30fc\u306e\u8a2d\u5b9a","text":""},{"location":"ja/eap-tls/proxy_issues/#31","title":"\ud83d\udccd 3.1 \u30c7\u30d0\u30a4\u30b9\u74b0\u5883","text":"\u30c7\u30d0\u30a4\u30b9 \u5f79\u5272 IP \u30a2\u30c9\u30ec\u30b9 MiniPC-1 \u8a8d\u8a3c\u30af\u30e9\u30a4\u30a2\u30f3\u30c8 (EAP-TLS) <code>192.168.8.220</code> Router (GL-AXT1800-83b-5G) \u5168\u30c7\u30d0\u30a4\u30b9\u3092\u63a5\u7d9a\u3057\u3001\u30d7\u30ed\u30ad\u30b7\u304c RADIUS \u30b5\u30fc\u30d0\u30fc\u3068\u3057\u3066\u52d5\u4f5c N/A MiniPC-2 \u30d7\u30ed\u30ad\u30b7\u30b5\u30fc\u30d0\u30fc (RADIUS \u8a8d\u8a3c\u8981\u6c42\u3092\u8ee2\u9001) <code>192.168.8.182</code> PC (RADIUS \u30b5\u30fc\u30d0\u30fc) \u8a8d\u8a3c\u30b5\u30fc\u30d0\u30fc (FreeRADIUS 3.0.26) <code>192.168.8.195</code>"},{"location":"ja/eap-tls/proxy_issues/#32-radius","title":"\ud83d\udccd 3.2 \u30d7\u30ed\u30ad\u30b7\u30b5\u30fc\u30d0\u30fc\u304c RADIUS \u30b5\u30fc\u30d0\u30fc\u3068\u63a5\u7d9a\u3067\u304d\u308b\u3053\u3068\u3092\u78ba\u8a8d","text":"<p>UDP 1812 \u30dd\u30fc\u30c8\u306e\u63a5\u7d9a\u30c6\u30b9\u30c8</p> <pre><code>nc -zvu 192.168.8.195 1812\n</code></pre> <p>\u2705 UDP \u30dd\u30fc\u30c8 1812 \u3078\u306e\u63a5\u7d9a\u6210\u529f\u3001\u30d7\u30ed\u30ad\u30b7\u30b5\u30fc\u30d0\u30fc\u304c RADIUS \u30b5\u30fc\u30d0\u30fc\u3068\u901a\u4fe1\u53ef\u80fd\u3002</p>"},{"location":"ja/eap-tls/proxy_issues/#33","title":"\ud83d\udccd 3.3 \u30d7\u30ed\u30ad\u30b7\u30b5\u30fc\u30d0\u30fc\u306e\u8a2d\u5b9a","text":""},{"location":"ja/eap-tls/proxy_issues/#1-proxyconf","title":"\ud83d\udd39 1. <code>proxy.conf</code> \u306e\u7de8\u96c6","text":"<pre><code>proxy_requests = yes\n\nrealm DEFAULT {\n    type = radius\n    authhost = 192.168.8.195:1812\n    accthost = 192.168.8.195:1813\n    secret = shared_secret_key\n}\n</code></pre> <p>\u2705 \u30d7\u30ed\u30ad\u30b7\u30b5\u30fc\u30d0\u30fc\u304c \"\u4e2d\u7d99\" \u306e\u307f\u3092\u884c\u3044\u3001\"\u30ed\u30fc\u30ab\u30eb\u8a8d\u8a3c\" \u3092\u3057\u306a\u3044\u3053\u3068\u3092\u78ba\u8a8d</p>"},{"location":"ja/eap-tls/proxy_issues/#2-radius","title":"\ud83d\udd39 2. RADIUS \u30b5\u30fc\u30d0\u30fc\u306e\u8a2d\u5b9a\uff08\u30d7\u30ed\u30ad\u30b7\u3092\u8a31\u53ef\uff09","text":"<p><code>clients.conf</code> \u306b\u30d7\u30ed\u30ad\u30b7\u30b5\u30fc\u30d0\u30fc\u3092\u8ffd\u52a0\uff1a</p> <pre><code>client 192.168.8.182 {\n    secret = shared_secret_key\n    shortname = proxy\n}\n</code></pre> <p>\u2705 \u30d7\u30ed\u30ad\u30b7\u30b5\u30fc\u30d0\u30fc\u3068 RADIUS \u30b5\u30fc\u30d0\u30fc\u306e <code>secret</code> \u304c\u4e00\u81f4\u3059\u308b\u3053\u3068\u3092\u78ba\u8a8d</p>"},{"location":"ja/eap-tls/proxy_issues/#3-radius","title":"\ud83d\udd39 3. RADIUS \u30b5\u30fc\u30d0\u30fc\u3068\u30d7\u30ed\u30ad\u30b7\u30b5\u30fc\u30d0\u30fc\u306e\u8d77\u52d5","text":"<pre><code>systemctl restart freeradius\n</code></pre> <p>\u30ed\u30b0\u3092\u78ba\u8a8d\uff1a</p> <pre><code>journalctl -u freeradius -f\n</code></pre> <p>\u2705 \u30b5\u30fc\u30d3\u30b9\u304c\u6b63\u5e38\u306b\u52d5\u4f5c\u3057\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d</p>"},{"location":"ja/eap-tls/proxy_issues/#4-eap-tls","title":"\ud83d\udee0 4. EAP-TLS \u8a8d\u8a3c\u30c6\u30b9\u30c8\u306e\u5b9f\u884c","text":""},{"location":"ja/eap-tls/proxy_issues/#41-eap-tls","title":"\ud83d\udccc 4.1 EAP-TLS \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u306e\u8a2d\u5b9a","text":"<p><code>eapol_test.conf</code> \u3092\u4f5c\u6210\uff1a</p> <pre><code>network={\n    ssid=\"GL-AXT1800-83b-5G\"\n    key_mgmt=WPA-EAP\n    eap=TLS\n    identity=\"testuser\"\n    anonymous_identity=\"testuser\"\n    ca_cert=\"/home/user/ca.crt\"\n    client_cert=\"/home/user/client.crt\"\n    private_key=\"/home/user/client.key\"\n    private_key_passwd=\"\"\n}\n</code></pre>"},{"location":"ja/eap-tls/proxy_issues/#42-eap-tls","title":"\ud83d\udccc 4.2 EAP-TLS \u8a8d\u8a3c\u3092\u5b9f\u884c","text":"<pre><code>eapol_test -c ~/eapol_test.conf -s shared_secret_key -a 192.168.8.182 -p 1812\n</code></pre> <p>\u2705 \u30d7\u30ed\u30ad\u30b7\u30b5\u30fc\u30d0\u30fc\u304c\u8981\u6c42\u3092 RADIUS \u30b5\u30fc\u30d0\u30fc\u306b\u8ee2\u9001\u3057\u3001\u8a8d\u8a3c\u6210\u529f</p>"},{"location":"ja/eap-tls/proxy_issues/#5","title":"\u2705 5. \u767a\u751f\u3057\u305f\u554f\u984c\u3068\u89e3\u6c7a\u7b56","text":""},{"location":"ja/eap-tls/proxy_issues/#1_1","title":"\ud83d\udd34 1. \u30d7\u30ed\u30ad\u30b7\u30b5\u30fc\u30d0\u30fc\u304c\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u6b63\u3057\u304f\u8ee2\u9001\u3057\u306a\u3044","text":""},{"location":"ja/eap-tls/proxy_issues/#_2","title":"\u274c \u554f\u984c","text":"<ul> <li>Proxy Server \u304c EAP-TLS \u8a8d\u8a3c\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u6b63\u3057\u304f\u8ee2\u9001\u305b\u305a\u3001\u30ed\u30fc\u30ab\u30eb\u3067\u51e6\u7406\u3057\u3066\u3057\u307e\u3046\u3002</li> <li><code>radiusd -X</code> \u30ed\u30b0\u306b \u8a8d\u8a3c\u30ea\u30af\u30a8\u30b9\u30c8\u306e\u8ee2\u9001\u8a18\u9332\u304c\u306a\u3044\u3002</li> </ul>"},{"location":"ja/eap-tls/proxy_issues/#_3","title":"\u2705 \u89e3\u6c7a\u7b56","text":"<ol> <li>\u30d7\u30ed\u30ad\u30b7\u8ee2\u9001\u3092\u6709\u52b9\u306b\u3059\u308b <code>ini    proxy_requests = yes</code></li> <li><code>proxy.conf</code> \u306e <code>realm</code> \u8a2d\u5b9a\u304c\u6b63\u3057\u3044\u3053\u3068\u3092\u78ba\u8a8d <code>ini    realm DEFAULT {        type = radius        authhost = 192.168.8.195:1812        accthost = 192.168.8.195:1813        secret = shared_secret_key        auth_pool = my_auth_failover  # \u81ea\u5206\u306e\u8a2d\u5b9a\u306b\u5909\u66f4\u3057\u3066\u304f\u3060\u3055\u3044    }</code></li> <li>FreeRADIUS \u3092\u518d\u8d77\u52d5 <code>sh    systemctl restart freeradius</code> \u2705 EAP-TLS \u8a8d\u8a3c\u30ea\u30af\u30a8\u30b9\u30c8\u306e\u8ee2\u9001\u306b\u6210\u529f\u3057\u307e\u3057\u305f\uff01 \ud83c\udf89</li> </ol>"},{"location":"ja/eap-tls/proxy_issues/#2_1","title":"\ud83d\udd34 2. \u8a3c\u660e\u66f8\u30c1\u30a7\u30fc\u30f3\u306e\u30a8\u30e9\u30fc","text":""},{"location":"ja/eap-tls/proxy_issues/#_4","title":"\u274c \u554f\u984c","text":"<ul> <li><code>eapol_test</code> \u306e\u8a8d\u8a3c\u306b\u5931\u6557\u3057\u3001\u30ed\u30b0\u306b\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u8868\u793a\u3055\u308c\u308b\uff1a   <code>Certificate chain - 1 cert(s) untrusted</code></li> <li>RADIUS \u30b5\u30fc\u30d0\u30fc\u306e\u30ed\u30b0\uff1a   <code>TLS Alert read: warning: unknown CA</code></li> </ul>"},{"location":"ja/eap-tls/proxy_issues/#_5","title":"\u2705 \u89e3\u6c7a\u7b56","text":"<ol> <li>RADIUS \u30b5\u30fc\u30d0\u30fc\u306e <code>eap.conf</code> \u8a2d\u5b9a\u304c\u6b63\u3057\u3044\u3053\u3068\u3092\u78ba\u8a8d <code>ini    tls-config tls-common {        private_key_file = /etc/freeradius/3.0/certs/server.key        certificate_file = /etc/freeradius/3.0/certs/server.pem        ca_file = /etc/freeradius/3.0/certs/ca.pem    }</code></li> <li>\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u306b CA \u8a3c\u660e\u66f8\u3092\u30a4\u30f3\u30dd\u30fc\u30c8 <code>sh    scp root@192.168.8.195:/etc/freeradius/3.0/certs/ca.crt ~/Desktop/</code> \u2705 \u8a3c\u660e\u66f8\u304c\u6b63\u3057\u304f\u4e00\u81f4\u3057\u3001\u8a8d\u8a3c\u304c\u6210\u529f\u3057\u307e\u3057\u305f\uff01 \ud83c\udf89</li> </ol>"},{"location":"ja/eap-tls/proxy_issues/#6","title":"\ud83d\udccc 6. \u4eca\u5f8c\u306e\u6700\u9069\u5316\u306e\u65b9\u5411\u6027","text":"<ul> <li>\ud83c\udf0d \u591a\u6bb5\u968e\u30d7\u30ed\u30ad\u30b7\u8a8d\u8a3c\u30c6\u30b9\u30c8: \u8a8d\u8a3c\u8981\u6c42\u306e\u4e8c\u6b21\u8ee2\u9001\u3092\u8a66\u3059</li> <li>\ud83d\udcca \u8a8d\u8a3c\u9045\u5ef6\u306e\u6700\u9069\u5316: \u30d7\u30ed\u30ad\u30b7\u30b5\u30fc\u30d0\u30fc\u306e\u8ee2\u9001\u306b\u3088\u308b\u8ffd\u52a0\u9045\u5ef6\u3092\u6e2c\u5b9a</li> <li>\ud83d\udd10 \u8a3c\u660e\u66f8\u7ba1\u7406\u306e\u6700\u9069\u5316: \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u8a3c\u660e\u66f8\u306e\u30a4\u30f3\u30dd\u30fc\u30c8\u30d7\u30ed\u30bb\u30b9\u3092\u7c21\u7d20\u5316\u3057\u3001RADIUS CA \u306e\u4fe1\u983c\u3092\u81ea\u52d5\u5316</li> </ul>"},{"location":"ja/eap-tls/proxy_issues/#_6","title":"\ud83d\udccc \u53c2\u8003\u8cc7\u6599","text":"<ul> <li>\ud83d\udcd6 FreeRADIUS \u516c\u5f0f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8: https://freeradius.org/</li> <li>\ud83d\udcd6 Eduroam \u8a8d\u8a3c\u30ac\u30a4\u30c9: NII MeatWiki</li> </ul>"},{"location":"ja/eap-tls/setup/","title":"Ubuntu \u306b\u304a\u3051\u308b EAP-TLS RADIUS \u30b5\u30fc\u30d0\u30fc","text":"<p>\u672c\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3067\u306f\u3001Ubuntu \u74b0\u5883\u3067 EAP-TLS \u8a8d\u8a3c\u3092\u4f7f\u7528\u3057\u305f FreeRADIUS \u30b5\u30fc\u30d0\u30fc \u306e\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u624b\u9806\u3092\u63d0\u4f9b\u3057\u307e\u3059\u3002\u4ee5\u4e0b\u306e\u5185\u5bb9\u3092\u542b\u307f\u307e\u3059\uff1a - FreeRADIUS \u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb - EAP-TLS \u8a3c\u660e\u66f8\u306e\u751f\u6210 - RADIUS \u30b5\u30fc\u30d0\u30fc\u306e\u8a2d\u5b9a - \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30c7\u30d0\u30a4\u30b9\u306e\u63a5\u7d9a - \u30c7\u30d0\u30c3\u30b0\u3068\u30c8\u30e9\u30d6\u30eb\u30b7\u30e5\u30fc\u30c6\u30a3\u30f3\u30b0</p>"},{"location":"ja/eap-tls/setup/#_1","title":"\ud83d\ude80 \u5b9f\u9a13\u74b0\u5883","text":"<ol> <li>Ubuntu \u4eee\u60f3\u30de\u30b7\u30f3\uff08RADIUS \u30b5\u30fc\u30d0\u30fc\u3068\u3057\u3066\uff09\u3002</li> <li>\u30eb\u30fc\u30bf\u30fc\uff08\u7121\u7dda\u30a2\u30af\u30bb\u30b9\u30dd\u30a4\u30f3\u30c8\u3068\u3057\u3066\uff09\u3002</li> <li>Redmi K50 \u30b9\u30de\u30fc\u30c8\u30d5\u30a9\u30f3\uff08Wi-Fi \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u3068\u3057\u3066\uff09\u3002</li> <li>\u7121\u7dda\u30a2\u30c0\u30d7\u30bf\u30fc\uff08\u30c7\u30d0\u30c3\u30b0\u3084\u30d1\u30b1\u30c3\u30c8\u30ad\u30e3\u30d7\u30c1\u30e3\u7528\uff09\u3002</li> </ol>"},{"location":"ja/eap-tls/setup/#1-freeradius","title":"\ud83d\udccc 1. FreeRADIUS \u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb","text":"<pre><code>sudo apt update &amp;&amp; sudo apt install freeradius freeradius-utils -y\n</code></pre> <p>RADIUS \u30b5\u30fc\u30d0\u30fc\u304c\u6b63\u5e38\u306b\u52d5\u4f5c\u3057\u3066\u3044\u308b\u304b\u78ba\u8a8d\uff1a</p> <pre><code>sudo systemctl status freeradius\n</code></pre> <p>\u8d77\u52d5\u3057\u3066\u3044\u306a\u3044\u5834\u5408\uff1a</p> <pre><code>sudo systemctl enable --now freeradius\n</code></pre>"},{"location":"ja/eap-tls/setup/#2-freeradius","title":"\ud83d\udccc 2. FreeRADIUS \u306e\u8a2d\u5b9a","text":""},{"location":"ja/eap-tls/setup/#clientsconf","title":"<code>clients.conf</code> \u306e\u7de8\u96c6","text":"<pre><code>sudo nano /etc/freeradius/3.0/clients.conf\n</code></pre> <p>\u6b21\u306e\u5185\u5bb9\u3092\u8ffd\u52a0\u3057\u3066\u304f\u3060\u3055\u3044\uff08\u26a0\ufe0f <code>192.168.51.2</code> \u3092\u30eb\u30fc\u30bf\u30fc\u306e IP \u306b\u7f6e\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044 \u26a0\ufe0f\uff09\uff1a</p> <pre><code>client your_router {\n    ipaddr = 192.168.51.2  \n    secret = testing123  \n    shortname = router  \n}\n</code></pre>"},{"location":"ja/eap-tls/setup/#eap","title":"EAP \u30e2\u30b8\u30e5\u30fc\u30eb\u306e\u6709\u52b9\u5316","text":"<pre><code>sudo nano /etc/freeradius/3.0/mods-enabled/eap\n</code></pre> <p>\u6b21\u306e\u8a2d\u5b9a\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\uff1a</p> <pre><code>eap {\n    default_eap_type = tls\n}\n\ntls-config tls-common {\n    private_key_file = /etc/freeradius/3.0/certs/server.key\n    certificate_file = /etc/freeradius/3.0/certs/server.crt\n    CA_file = /etc/freeradius/3.0/certs/ca.crt\n    dh_file = /etc/freeradius/3.0/certs/dh\n    random_file = /dev/urandom\n}\n</code></pre> <p>\u26a0\ufe0f \u79c1\u306e\u8a3c\u660e\u66f8\u306e\u30d1\u30b9\u3092\u4f7f\u7528\u3057\u3066\u3044\u307e\u3059\u306e\u3067\u3001\u5fc5\u305a\u81ea\u5206\u306e\u8a3c\u660e\u66f8\u306e\u30d1\u30b9\u306b\u7f6e\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044\uff01</p>"},{"location":"ja/eap-tls/setup/#3","title":"\ud83d\udccc 3. \u8a3c\u660e\u66f8\u306e\u751f\u6210","text":"<p>\u8a3c\u660e\u66f8\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u6210\uff08\u5b58\u5728\u3057\u306a\u3044\u5834\u5408\uff09\uff1a</p> <pre><code>sudo mkdir -p /etc/freeradius/3.0/certs\ncd /etc/freeradius/3.0/certs\n</code></pre>"},{"location":"ja/eap-tls/setup/#ca","title":"CA \u8a3c\u660e\u66f8\u306e\u751f\u6210","text":"<pre><code>sudo openssl genrsa -out ca.key 2048\nsudo openssl req -x509 -new -nodes -key ca.key -sha256 -days 365 -out ca.crt -subj \"/C=JP/ST=Miyagi/L=Sendai/O=Tohoku University/OU=Goto Lab/CN=CA\"\n</code></pre>"},{"location":"ja/eap-tls/setup/#_2","title":"\u30b5\u30fc\u30d0\u30fc\u8a3c\u660e\u66f8\u306e\u751f\u6210","text":"<pre><code>sudo openssl genrsa -out server.key 2048\nsudo openssl req -new -key server.key -out server.csr -subj \"/C=JP/ST=Miyagi/L=Sendai/O=Tohoku University/OU=Goto Lab/CN=radius-server.local\"\nsudo openssl x509 -req -in server.csr -CA ca.crt -CAkey ca.key -CAcreateserial -out server.crt -days 365 -sha256\n</code></pre>"},{"location":"ja/eap-tls/setup/#_3","title":"\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u8a3c\u660e\u66f8\u306e\u751f\u6210","text":"<pre><code>sudo openssl genrsa -out client.key 2048\nsudo openssl req -new -key client.key -out client.csr -subj \"/C=JP/ST=Miyagi/L=Sendai/O=Tohoku University/OU=Goto Lab/CN=client\"\nsudo openssl x509 -req -in client.csr -CA ca.crt -CAkey ca.key -CAcreateserial -out client.crt -days 365 -sha256\n</code></pre> <p>\u26a0\ufe0f \u6ce8\u610f\uff1a \u4e0a\u8a18\u306e\u30b3\u30de\u30f3\u30c9\u306b\u3042\u308b \"Tohoku University\" \u3084 \"Goto Lab\" \u306a\u3069\u306f\u79c1\u306e\u7814\u7a76\u5ba4\u306e\u60c5\u5831\u3067\u3059\u306e\u3067\u3001\u3054\u81ea\u8eab\u306e\u7d44\u7e54\u540d\u306b\u5909\u66f4\u3057\u3066\u304f\u3060\u3055\u3044\uff01</p>"},{"location":"ja/eap-tls/setup/#pkcs12","title":"PKCS#12 \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u8a3c\u660e\u66f8\u306e\u4f5c\u6210\uff08\u30b9\u30de\u30fc\u30c8\u30d5\u30a9\u30f3\u7528\uff09","text":"<pre><code>sudo openssl pkcs12 -export -inkey client.key -in client.crt -certfile ca.crt -out client.p12\n</code></pre>"},{"location":"ja/eap-tls/setup/#4-freeradius","title":"\ud83d\udccc 4. FreeRADIUS \u306e\u8d77\u52d5\u3068\u30c6\u30b9\u30c8","text":"<pre><code>sudo systemctl restart freeradius\nsudo journalctl -u freeradius -f\n</code></pre> <p><code>radtest</code> \u3092\u4f7f\u7528\u3057\u3066\u8a8d\u8a3c\u30c6\u30b9\u30c8\uff1a</p> <pre><code>radtest user password 127.0.0.1 0 testing123\n</code></pre> <p>\u6210\u529f\u3059\u308b\u3068\u3001<code>Access-Accept</code> \u304c\u8fd4\u3055\u308c\u307e\u3059\u3002</p>"},{"location":"ja/eap-tls/setup/#5-wi-fi","title":"\ud83d\udccc 5. \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u306e Wi-Fi \u8a2d\u5b9a","text":""},{"location":"ja/eap-tls/setup/#_4","title":"\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u8a3c\u660e\u66f8\u306e\u6e96\u5099","text":"<ol> <li><code>client.p12</code> \u3068 <code>ca.crt</code> \u3092\u30b9\u30de\u30fc\u30c8\u30d5\u30a9\u30f3\u306b\u8ee2\u9001\u3057\u307e\u3059\uff08Google Drive \u306a\u3069\u3092\u4f7f\u7528\uff09\u3002</li> <li>Android/iPhone \u306b\u8a3c\u660e\u66f8\u3092\u30a4\u30f3\u30dd\u30fc\u30c8\uff1a</li> <li>Wi-Fi \u306e\u8a73\u7d30\u8a2d\u5b9a \u3067 EAP-TLS \u8a8d\u8a3c \u3092\u9078\u629e\u3002</li> <li><code>client.p12</code> \u3092\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u8a3c\u660e\u66f8\u3068\u3057\u3066\u9078\u629e\u3002</li> <li><code>ca.crt</code> \u3092 CA \u8a3c\u660e\u66f8\u3068\u3057\u3066\u9078\u629e\u3002</li> </ol>"},{"location":"ja/eap-tls/setup/#docsjpfaqmd","title":"\ud83d\udcc4 <code>docs/jp/faq.md</code>\uff08\u65e5\u8bed\u7248\uff09","text":"<pre><code>## \ud83d\udd27 7. \u3088\u304f\u3042\u308b\u8cea\u554f\u3068\u89e3\u6c7a\u7b56\n\n### **EAP-TLS \u8a8d\u8a3c\u306b\u5931\u6557**\n```sh\nTLS Alert: unknown CA\n</code></pre> <p>\u89e3\u6c7a\u65b9\u6cd5\uff1a - \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u304c <code>ca.crt</code> \u3092\u6b63\u3057\u304f\u30a4\u30f3\u30dd\u30fc\u30c8\u3057\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002 - \u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3067\u8a3c\u660e\u66f8\u3092\u691c\u8a3c\u3057\u3066\u304f\u3060\u3055\u3044\uff1a</p> <pre><code>openssl verify -CAfile ca.crt server.crt\n</code></pre>"},{"location":"ja/eap-tls/setup/#freeradius","title":"FreeRADIUS \u304c\u8d77\u52d5\u3057\u306a\u3044","text":"<pre><code>Failed to start freeradius.service\n</code></pre> <p>\u89e3\u6c7a\u65b9\u6cd5\uff1a</p> <pre><code>sudo systemctl restart freeradius\nsudo journalctl -u freeradius -f\n</code></pre>"},{"location":"ja/eap-tls/setup/#_5","title":"\u8a3c\u660e\u66f8\u306e\u6709\u52b9\u671f\u9650\u5207\u308c","text":"<p>\u8a3c\u660e\u66f8\u304c\u7121\u52b9\u306b\u306a\u3063\u305f\u5834\u5408\u3001\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3067\u524a\u9664\u3057\u3001\u518d\u751f\u6210\u3057\u3066\u304f\u3060\u3055\u3044\uff1a</p> <pre><code>sudo rm /etc/freeradius/3.0/certs/*.crt\nsudo rm /etc/freeradius/3.0/certs/*.key\nsudo rm /etc/freeradius/3.0/certs/*.csr\nsudo rm /etc/freeradius/3.0/certs/*.srl\nbash scripts/generate_certs.sh\n</code></pre>"},{"location":"ja/eap-tls/setup/#_6","title":"\ud83d\udcdc \u30e9\u30a4\u30bb\u30f3\u30b9","text":"<p>\u672c\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306f MIT License \u306e\u3082\u3068\u3067\u516c\u958b\u3055\u308c\u3066\u3044\u307e\u3059\u3002 \u81ea\u7531\u306b\u5229\u7528\u30fb\u6539\u5909\u3067\u304d\u307e\u3059\u304c\u3001\u5f15\u7528\u3084\u518d\u958b\u767a\u3059\u308b\u5834\u5408\u306f\u3001\u51fa\u5178\u3092\u660e\u8a18\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"ja/eap-tls/setup/#_7","title":"\ufffd\ufffd \u53c2\u8003\u8cc7\u6599","text":"<p>\u672c\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u5185\u5bb9\u306f\u4ee5\u4e0b\u306e\u30ea\u30bd\u30fc\u30b9\u306b\u57fa\u3065\u3044\u3066\u3044\u307e\u3059\uff1a - FreeRADIUS \u516c\u5f0f\u30b5\u30a4\u30c8: https://www.freeradius.org/ - NII \u5b66\u8853\u8a8d\u8a3c\u63a8\u9032\u5ba4 - Eduroam \u304a\u3088\u3073 RADIUS \u95a2\u9023\u6587\u66f8: NII MeatWiki</p>"},{"location":"ja/eap-tls/setup/#_8","title":"\ud83d\udce9 \u304a\u554f\u3044\u5408\u308f\u305b","text":"<p>\u8cea\u554f\u3084\u63d0\u6848\u304c\u3042\u308b\u5834\u5408\u306f\u3001Issue \u3092\u63d0\u51fa\u3059\u308b\u304b\u3001GitHub \u30da\u30fc\u30b8\u3092\u3054\u89a7\u304f\u3060\u3055\u3044\u3002</p> <p>\ud83d\udd17 GitHub \u30da\u30fc\u30b8 </p> <p>\u672c\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u304c\u5f79\u306b\u7acb\u3063\u305f\u5834\u5408\u306f\u3001Star \u2b50 \u3067\u306e\u5fdc\u63f4 \u3092\u304a\u9858\u3044\u3057\u307e\u3059\uff01</p>"},{"location":"zh/","title":"\ud83c\udf0d \u6b22\u8fce\u6765\u5230\u6211\u7684\u535a\u5ba2","text":""},{"location":"zh/#yang-xirui","title":"Yang XiRui","text":"<p>\ud83c\udf93 \u65e0\u7ebf\u7f51\u7edc\u7814\u7a76 | \u4e1c\u5317\u5927\u5b66 | EAP-TLS | WiFi \u5b89\u5168 \ud83d\udc19 GitHub | \ud83d\udcf0 \u77e5\u4e4e | \ud83d\udcd6 \u5c0f\u7ea2\u4e66</p>"},{"location":"zh/#_2","title":"\ud83d\ude80 \u7f6e\u9876\u6587\u7ae0","text":"<p>\ud83d\udd10 EAP-TLS \u8ba4\u8bc1\u5168\u6d41\u7a0b</p>"},{"location":"zh/#_3","title":"\ud83d\udcda \u7cbe\u9009\u5206\u7c7b","text":"<p>\ud83c\udde8\ud83c\uddf3 \u4e2d\u6587\u6587\u6863</p> <p>\ud83c\uddef\ud83c\uddf5 \u65e5\u672c\u8bed\u6587\u6863</p> <p>\ud83c\uddfa\ud83c\uddf8 \u82f1\u6587\u6587\u6863</p>"},{"location":"zh/eap-tls/","title":"\ud83d\udce1 EAP-TLS RADIUS \u8ba4\u8bc1\u5b9e\u9a8c","text":"<p>\u5b8c\u6574\u7684 FreeRADIUS EAP-TLS \u8ba4\u8bc1\u90e8\u7f72\u6307\u5357 \u4e86\u89e3\u5982\u4f55\u4f7f\u7528 FreeRADIUS \u6784\u5efa \u5b89\u5168\u4e14\u53ef\u6269\u5c55 \u7684\u8eab\u4efd\u8ba4\u8bc1\u7cfb\u7edf\u3002</p>"},{"location":"zh/eap-tls/#_1","title":"\ud83d\ude80 \u9879\u76ee\u6982\u8ff0","text":"<p>\u672c\u9879\u76ee\u63d0\u4f9b EAP-TLS \u8ba4\u8bc1\u7684\u8be6\u7ec6\u642d\u5efa\u6559\u7a0b\uff0c\u5305\u62ec\uff1a - \u2705 \u5b89\u88c5 FreeRADIUS - \ud83d\udd11 \u751f\u6210 EAP-TLS \u8bc1\u4e66 - \u2699\ufe0f \u914d\u7f6e RADIUS \u670d\u52a1\u5668 - \ud83d\udce1 \u8fde\u63a5\u65e0\u7ebf\u5ba2\u6237\u7aef - \ud83d\udee0 \u8c03\u8bd5\u4e0e\u6545\u969c\u6392\u9664</p> <p>\ud83c\udf0d \u4f60\u53ef\u4ee5\u4f7f\u7528\u9876\u90e8\u5bfc\u822a\u680f\u5207\u6362\u8bed\u8a00</p>"},{"location":"zh/eap-tls/#_2","title":"\ufffd\ufffd \u5b9e\u9a8c\u73af\u5883","text":"\u7ec4\u4ef6 \u8bf4\u660e \ud83d\udda5\ufe0f Ubuntu \u865a\u62df\u673a RADIUS \u670d\u52a1\u5668\u73af\u5883 \ud83d\udce1 \u8def\u7531\u5668 \u4f5c\u4e3a\u65e0\u7ebf\u63a5\u5165\u70b9 \ud83d\udcf1 \u7ea2\u7c73 K50 \u624b\u673a \u4f5c\u4e3a\u65e0\u7ebf\u5ba2\u6237\u7aef \ufffd\ufffd \u65e0\u7ebf\u7f51\u5361 \u7528\u4e8e\u8c03\u8bd5\u548c\u6293\u5305"},{"location":"zh/eap-tls/#_3","title":"\ud83d\udd17 \u76f8\u5173\u8d44\u6e90","text":"<p>\ud83d\udccc FreeRADIUS \u5b98\u65b9\u6587\u6863 \ud83d\udd17 FreeRADIUS.org</p> <p>\ud83d\udccc \u8bc1\u4e66\u8ba4\u8bc1\u548c\u5b89\u5168 \ud83d\udd17 Let's Encrypt</p> <p>\ud83d\udccc GitHub \u9879\u76ee\u4e3b\u9875 \ud83d\udd17 yangxir/RADIUS-EAPTLS-EXP</p>"},{"location":"zh/eap-tls/proxy_issues/","title":"\ud83d\udce1 RADIUS Proxy Server \u8ba4\u8bc1\u6307\u5357","text":""},{"location":"zh/eap-tls/proxy_issues/#1","title":"\ud83d\udccc 1. \u4ee3\u7406\u670d\u52a1\u5668\u7684\u4f5c\u7528","text":""},{"location":"zh/eap-tls/proxy_issues/#proxy-server","title":"\ud83d\udd39 \u4e3a\u4ec0\u4e48\u9700\u8981 Proxy Server\uff1f","text":"<p>\u5728 RADIUS \u8ba4\u8bc1\u67b6\u6784\u4e2d\uff0cProxy Server\uff08\u4ee3\u7406\u670d\u52a1\u5668\uff09 \u4e3b\u8981\u7528\u4e8e \u8f6c\u53d1 \u8ba4\u8bc1\u8bf7\u6c42\uff0c\u800c\u975e\u76f4\u63a5\u5904\u7406\u8ba4\u8bc1\u3002\u5176\u6838\u5fc3\u4f5c\u7528\u662f\u5728 \u5206\u5e03\u5f0f\u73af\u5883 \u4e0b\uff0c\u786e\u4fdd\u5ba2\u6237\u7aef\u7684\u8ba4\u8bc1\u8bf7\u6c42\u80fd\u591f\u987a\u5229\u5230\u8fbe\u6700\u7ec8\u7684 RADIUS \u670d\u52a1\u5668\u3002</p> <p>\u5728\u4ee5\u4e0b\u573a\u666f\u4e2d\uff0cProxy Server \u81f3\u5173\u91cd\u8981\uff1a - \u4f01\u4e1a WiFi \u8ba4\u8bc1\uff08\u5982 Eduroam \u7b49\u591a\u7ad9\u70b9\u6f2b\u6e38\uff09 - \u591a\u7ea7 RADIUS \u8ba4\u8bc1\uff08\u5982 ISP \u8ba4\u8bc1\u7cfb\u7edf\uff09 - \u8de8\u56fd/\u8de8\u533a\u57df WiFi \u8ba4\u8bc1\uff08\u4e0d\u540c\u56fd\u5bb6 RADIUS \u670d\u52a1\u5668\u95f4\u7684\u8ba4\u8bc1\u8f6c\u53d1\uff09</p>"},{"location":"zh/eap-tls/proxy_issues/#2-proxy-server","title":"\ud83d\udccc 2. Proxy Server \u7684\u5de5\u4f5c\u6d41\u7a0b","text":"<p>1\ufe0f\u20e3 \u5ba2\u6237\u7aef \u53d1\u9001 EAP-TLS \u8ba4\u8bc1\u8bf7\u6c42 2\ufe0f\u20e3 Proxy Server \u63a5\u6536\u8bf7\u6c42\uff0c\u5e76\u8f6c\u53d1\u81f3\u6700\u7ec8\u7684 RADIUS Server 3\ufe0f\u20e3 RADIUS Server \u5904\u7406\u8ba4\u8bc1\u8bf7\u6c42\uff0c\u5e76\u8fd4\u56de\u8ba4\u8bc1\u7ed3\u679c 4\ufe0f\u20e3 Proxy Server \u5c06\u7ed3\u679c\u8fd4\u56de\u7ed9\u5ba2\u6237\u7aef 5\ufe0f\u20e3 \u5ba2\u6237\u7aef\u6210\u529f\u63a5\u5165 WiFi \ud83c\udf89  </p>"},{"location":"zh/eap-tls/proxy_issues/#3","title":"\u2699\ufe0f 3. \u4ee3\u7406\u670d\u52a1\u5668\u914d\u7f6e","text":""},{"location":"zh/eap-tls/proxy_issues/#31","title":"\ud83d\udccd 3.1 \u8bbe\u5907\u73af\u5883","text":"\u8bbe\u5907 \u89d2\u8272 IP \u5730\u5740 MiniPC-1 \u8ba4\u8bc1\u5ba2\u6237\u7aef (EAP-TLS) <code>192.168.8.220</code> Router (GL-AXT1800-83b-5G) \u8fde\u63a5\u6240\u6709\u8bbe\u5907\uff0cProxy \u4f5c\u4e3a RADIUS \u670d\u52a1\u5668 N/A MiniPC-2 Proxy Server (\u8f6c\u53d1 RADIUS \u8ba4\u8bc1\u8bf7\u6c42) <code>192.168.8.182</code> PC (RADIUS Server) \u8ba4\u8bc1\u670d\u52a1\u5668 (FreeRADIUS 3.0.26) <code>192.168.8.195</code>"},{"location":"zh/eap-tls/proxy_issues/#32-proxy-server-radius-server","title":"\ud83d\udccd 3.2 \u786e\u4fdd Proxy Server \u80fd\u8fde\u63a5\u5230 RADIUS Server","text":"<p>\u6d4b\u8bd5 UDP 1812 \u7aef\u53e3\u8fde\u901a\u6027</p> <pre><code>nc -zvu 192.168.8.195 1812\n</code></pre> <p>\u2705 UDP \u7aef\u53e3 1812 \u53ef\u8fbe\uff0c\u8868\u793a Proxy Server \u53ef\u4ee5\u4e0e RADIUS Server \u901a\u4fe1\u3002</p>"},{"location":"zh/eap-tls/proxy_issues/#33-proxy-server","title":"\ud83d\udccd 3.3 \u914d\u7f6e Proxy Server","text":""},{"location":"zh/eap-tls/proxy_issues/#1-proxyconf","title":"\ud83d\udd39 1. \u4fee\u6539 <code>proxy.conf</code>","text":"<pre><code>proxy_requests = yes\n\nrealm DEFAULT {\n    type = radius\n    authhost = 192.168.8.195:1812\n    accthost = 192.168.8.195:1813\n    secret = shared_secret_key\n}\n</code></pre> <p>\u2705 \u786e\u4fdd Proxy Server \u4ec5\u4f5c\u4e3a \"\u4e2d\u7ee7\"\uff0c\u800c\u975e \"\u672c\u5730\u8ba4\u8bc1\" \u670d\u52a1\u5668</p>"},{"location":"zh/eap-tls/proxy_issues/#2-radius-server-proxy","title":"\ud83d\udd39 2. \u914d\u7f6e RADIUS Server\uff0c\u5141\u8bb8 Proxy","text":"<p>\u5728 <code>clients.conf</code> \u6dfb\u52a0 Proxy Server\uff1a</p> <pre><code>client 192.168.8.182 {\n    secret = shared_secret_key\n    shortname = proxy\n}\n</code></pre> <p>\u2705 \u786e\u4fdd Proxy Server \u548c RADIUS Server \u7684 <code>secret</code> \u4e00\u81f4\uff0c\u5426\u5219\u4f1a\u62a5\u9519</p>"},{"location":"zh/eap-tls/proxy_issues/#3-radius-server-proxy-server","title":"\ud83d\udd39 3. \u542f\u52a8 RADIUS Server \u548c Proxy Server","text":"<pre><code>systemctl restart freeradius\n</code></pre> <p>\u67e5\u770b\u65e5\u5fd7\uff1a</p> <pre><code>journalctl -u freeradius -f\n</code></pre> <p>\u2705 \u786e\u4fdd\u670d\u52a1\u6b63\u5e38\u8fd0\u884c\uff0c\u65e0\u9519\u8bef\u4fe1\u606f</p>"},{"location":"zh/eap-tls/proxy_issues/#4-eap-tls","title":"\ud83d\udee0 4. \u8fdb\u884c EAP-TLS \u8ba4\u8bc1\u6d4b\u8bd5","text":""},{"location":"zh/eap-tls/proxy_issues/#41-eap-tls","title":"\ud83d\udccc 4.1 \u914d\u7f6e EAP-TLS \u5ba2\u6237\u7aef","text":"<p>\u521b\u5efa <code>eapol_test.conf</code>\uff1a</p> <pre><code>network={\n    ssid=\"GL-AXT1800-83b-5G\"\n    key_mgmt=WPA-EAP\n    eap=TLS\n    identity=\"testuser\"\n    anonymous_identity=\"testuser\"\n    ca_cert=\"/home/user/ca.crt\"\n    client_cert=\"/home/user/client.crt\"\n    private_key=\"/home/user/client.key\"\n    private_key_passwd=\"\"\n}\n</code></pre>"},{"location":"zh/eap-tls/proxy_issues/#42-eap-tls","title":"\ud83d\udccc 4.2 \u8fd0\u884c EAP-TLS \u8ba4\u8bc1","text":"<pre><code>eapol_test -c ~/eapol_test.conf -s shared_secret_key -a 192.168.8.182 -p 1812\n</code></pre> <p>\u2705 Proxy Server \u5c06\u8bf7\u6c42\u8f6c\u53d1\u5230 RADIUS Server\uff0c\u6700\u7ec8\u5b8c\u6210\u8ba4\u8bc1</p>"},{"location":"zh/eap-tls/proxy_issues/#5","title":"\u2705 5. \u9047\u5230\u7684\u95ee\u9898\u4e0e\u89e3\u51b3\u65b9\u6848","text":""},{"location":"zh/eap-tls/proxy_issues/#1-proxy-server","title":"\ud83d\udd34 1. Proxy Server \u6ca1\u6709\u6b63\u786e\u8f6c\u53d1\u8bf7\u6c42","text":""},{"location":"zh/eap-tls/proxy_issues/#_1","title":"\u274c \u73b0\u8c61","text":"<ul> <li>Proxy Server \u672a\u6b63\u786e\u8f6c\u53d1 EAP-TLS \u8ba4\u8bc1\u8bf7\u6c42\uff0c\u800c\u662f\u672c\u5730\u5904\u7406\u8ba4\u8bc1\u3002</li> <li><code>radiusd -X</code> \u65e5\u5fd7\u4e2d\u65e0 \u8ba4\u8bc1\u8bf7\u6c42\u53d1\u9001 \u8bb0\u5f55\u3002</li> </ul>"},{"location":"zh/eap-tls/proxy_issues/#_2","title":"\u2705 \u89e3\u51b3\u65b9\u6848","text":"<ol> <li>\u542f\u7528\u4ee3\u7406\u8f6c\u53d1 <code>ini    proxy_requests = yes</code></li> <li>\u786e\u4fdd <code>proxy.conf</code> \u91cc <code>realm</code> \u914d\u7f6e\u6b63\u786e <code>ini    realm DEFAULT {        type = radius        authhost = 192.168.8.195:1812        accthost = 192.168.8.195:1813        secret = shared_secret_key        auth_pool = my_auth_failover  #\u6362\u6210\u81ea\u5df1\u7684    }</code></li> <li>\u91cd\u542f FreeRADIUS <code>sh    systemctl restart freeradius</code> \u2705 \u6210\u529f\u8f6c\u53d1 EAP-TLS \u8ba4\u8bc1\u8bf7\u6c42\u81f3 RADIUS Server\uff01 \ud83c\udf89</li> </ol>"},{"location":"zh/eap-tls/proxy_issues/#2","title":"\ud83d\udd34 2. \u8bc1\u4e66\u94fe\u9519\u8bef","text":""},{"location":"zh/eap-tls/proxy_issues/#_3","title":"\u274c \u73b0\u8c61","text":"<ul> <li><code>eapol_test</code> \u8ba4\u8bc1\u5931\u8d25\uff0c\u65e5\u5fd7\u663e\u793a\uff1a   <code>Certificate chain - 1 cert(s) untrusted</code></li> <li>RADIUS Server \u7aef\u65e5\u5fd7\uff1a   <code>TLS Alert read: warning: unknown CA</code></li> </ul>"},{"location":"zh/eap-tls/proxy_issues/#_4","title":"\u2705 \u89e3\u51b3\u65b9\u6848","text":"<ol> <li>\u786e\u4fdd RADIUS Server <code>eap.conf</code> \u914d\u7f6e\u6b63\u786e <code>ini    tls-config tls-common {        private_key_file = /etc/freeradius/3.0/certs/server.key        certificate_file = /etc/freeradius/3.0/certs/server.pem        ca_file = /etc/freeradius/3.0/certs/ca.pem    }</code></li> <li>\u5ba2\u6237\u7aef\u5bfc\u5165 CA \u8bc1\u4e66 <code>sh    scp root@192.168.8.195:/etc/freeradius/3.0/certs/ca.crt ~/Desktop/</code> \u2705 \u8bc1\u4e66\u5339\u914d\u6210\u529f\uff0c\u8ba4\u8bc1\u901a\u8fc7\uff01 \ud83c\udf89</li> </ol>"},{"location":"zh/eap-tls/proxy_issues/#6","title":"\ud83d\udccc 6. \u672a\u6765\u4f18\u5316\u65b9\u5411","text":"<ul> <li>\ud83c\udf0d \u591a\u7ea7 Proxy \u8ba4\u8bc1\u6d4b\u8bd5\uff1a\u5c1d\u8bd5 Proxy Server \u4e8c\u6b21\u8f6c\u53d1\u8ba4\u8bc1\u8bf7\u6c42</li> <li>\ud83d\udcca \u8ba4\u8bc1\u5ef6\u8fdf\u4f18\u5316\uff1a\u6d4b\u91cf Proxy Server \u8f6c\u53d1\u7684 \u989d\u5916\u5ef6\u8fdf</li> <li>\ud83d\udd10 \u8bc1\u4e66\u7ba1\u7406\u4f18\u5316\uff1a\u7b80\u5316\u5ba2\u6237\u7aef\u8bc1\u4e66\u5bfc\u5165\u6d41\u7a0b\uff0c\u786e\u4fdd\u8bbe\u5907\u80fd\u591f\u81ea\u52a8\u4fe1\u4efb RADIUS CA  </li> </ul>"},{"location":"zh/eap-tls/proxy_issues/#_5","title":"\ud83d\udccc \u53c2\u8003\u8d44\u6599","text":"<ul> <li>\ud83d\udcd6 FreeRADIUS \u5b98\u65b9\u6587\u6863: https://freeradius.org/</li> <li>\ud83d\udcd6 Eduroam \u8ba4\u8bc1\u6307\u5357: NII MeatWiki</li> </ul>"},{"location":"zh/eap-tls/setup/","title":"EAP-TLS RADIUS Server on Ubuntu","text":"<p>\u672c\u9879\u76ee\u63d0\u4f9b Ubuntu \u73af\u5883\u4e0b EAP-TLS \u8ba4\u8bc1\u7684 FreeRADIUS \u670d\u52a1\u5668 \u642d\u5efa\u6559\u7a0b\uff0c\u5305\u62ec\uff1a - FreeRADIUS \u5b89\u88c5 - EAP-TLS \u8bc1\u4e66\u751f\u6210 - RADIUS \u670d\u52a1\u5668\u914d\u7f6e - \u7ec8\u7aef\u8bbe\u5907\u8fde\u63a5 - \u8c03\u8bd5\u4e0e\u6392\u9519</p>"},{"location":"zh/eap-tls/setup/#_1","title":"\ud83d\ude80 \u5b9e\u9a8c\u73af\u5883","text":"<ol> <li>Ubuntu \u865a\u62df\u673a\uff08\u4f5c\u4e3a RADIUS \u670d\u52a1\u5668\uff09\u3002</li> <li>\u8def\u7531\u5668\uff08\u4f5c\u4e3a\u65e0\u7ebf\u63a5\u5165\u70b9\uff09\u3002</li> <li>\u7ea2\u7c73 K50 \u624b\u673a\uff08\u4f5c\u4e3a\u65e0\u7ebf\u5ba2\u6237\u7aef\uff09\u3002</li> <li>\u65e0\u7ebf\u7f51\u5361\uff08\u7528\u4e8e\u8c03\u8bd5\u6216\u6293\u5305\uff09\u3002</li> </ol>"},{"location":"zh/eap-tls/setup/#1-freeradius","title":"\ud83d\udccc 1. \u5b89\u88c5 FreeRADIUS","text":"<pre><code>sudo apt update &amp;&amp; sudo apt install freeradius freeradius-utils -y\n</code></pre> <p>\u68c0\u67e5 RADIUS \u670d\u52a1\u5668\u662f\u5426\u6b63\u5e38\u8fd0\u884c\uff1a</p> <pre><code>sudo systemctl status freeradius\n</code></pre> <p>\u5982\u679c\u672a\u542f\u52a8\uff1a</p> <pre><code>sudo systemctl enable --now freeradius\n</code></pre>"},{"location":"zh/eap-tls/setup/#2-freeradius","title":"\ud83d\udccc 2. \u914d\u7f6e FreeRADIUS","text":""},{"location":"zh/eap-tls/setup/#clientsconf","title":"\u4fee\u6539 <code>clients.conf</code>","text":"<pre><code>sudo nano /etc/freeradius/3.0/clients.conf\n</code></pre> <p>\u6dfb\u52a0\u4ee5\u4e0b\u5185\u5bb9\uff08\u26a0\ufe0f \u8bf7\u66ff\u6362 <code>192.168.51.2</code> \u4e3a\u4f60\u7684\u8def\u7531\u5668 IP \u26a0\ufe0f\uff09\uff1a</p> <pre><code>client your_router {\n    ipaddr = 192.168.51.2  \n    secret = testing123  \n    shortname = router  \n}\n</code></pre>"},{"location":"zh/eap-tls/setup/#eap","title":"\u542f\u7528 EAP \u6a21\u5757","text":"<pre><code>sudo nano /etc/freeradius/3.0/mods-enabled/eap\n</code></pre> <p>\u786e\u4fdd\u4ee5\u4e0b\u5185\u5bb9\u6b63\u786e\uff1a</p> <pre><code>eap {\n    default_eap_type = tls\n}\n\ntls-config tls-common {\n    private_key_file = /etc/freeradius/3.0/certs/server.key\n    certificate_file = /etc/freeradius/3.0/certs/server.crt\n    CA_file = /etc/freeradius/3.0/certs/ca.crt\n    dh_file = /etc/freeradius/3.0/certs/dh\n    random_file = /dev/urandom\n}\n\n</code></pre> <p>\u26a0\ufe0f \u56e0\u4e3a\u6211\u7684\u8bc1\u4e66\u90fd\u653e\u5728\u8fd9\uff0c\u4f60\u9700\u8981\u6362\u6210\u4f60\u81ea\u5df1\u8bc1\u4e66\u7684\u4f4d\u7f6e\uff01</p>"},{"location":"zh/eap-tls/setup/#3","title":"\ud83d\udccc 3. \u751f\u6210\u8bc1\u4e66","text":"<p>\u521b\u5efa\u8bc1\u4e66\u76ee\u5f55\uff08\u5982\u679c\u4e0d\u5b58\u5728\uff09\uff1a</p> <pre><code>sudo mkdir -p /etc/freeradius/3.0/certs\ncd /etc/freeradius/3.0/certs\n</code></pre>"},{"location":"zh/eap-tls/setup/#ca","title":"\u751f\u6210 CA \u8bc1\u4e66","text":"<pre><code>sudo openssl genrsa -out ca.key 2048\nsudo openssl req -x509 -new -nodes -key ca.key -sha256 -days 365 -out ca.crt -subj \"/C=JP/ST=Miyagi/L=Sendai/O=Tohoku University/OU=Goto Lab/CN=CA\"\n</code></pre>"},{"location":"zh/eap-tls/setup/#_2","title":"\u751f\u6210\u670d\u52a1\u5668\u8bc1\u4e66","text":"<pre><code>sudo openssl genrsa -out server.key 2048\nsudo openssl req -new -key server.key -out server.csr -subj \"/C=JP/ST=Miyagi/L=Sendai/O=Tohoku University/OU=Goto Lab/CN=radius-server.local\"\nsudo openssl x509 -req -in server.csr -CA ca.crt -CAkey ca.key -CAcreateserial -out server.crt -days 365 -sha256\n</code></pre>"},{"location":"zh/eap-tls/setup/#_3","title":"\u751f\u6210\u5ba2\u6237\u7aef\u8bc1\u4e66","text":"<pre><code>sudo openssl genrsa -out client.key 2048\nsudo openssl req -new -key client.key -out client.csr -subj \"/C=JP/ST=Miyagi/L=Sendai/O=Tohoku University/OU=Goto Lab/CN=client\"\nsudo openssl x509 -req -in client.csr -CA ca.crt -CAkey ca.key -CAcreateserial -out client.crt -days 365 -sha256\n</code></pre> <p>\u26a0\ufe0f \u6ce8\u610f\uff1a \u4e0a\u9762\u7684\u547d\u4ee4\u4e2d\uff0c\"Tohoku University\"\u3001\"Goto Lab\" \u7b49\u5185\u5bb9\u662f\u6211\u7814\u7a76\u5ba4\u7684\u76f8\u5173\u4fe1\u606f\uff0c\u4f60\u9700\u8981\u66ff\u6362\u6210\u4f60\u81ea\u5df1\u7684\u5355\u4f4d\u6216\u7ec4\u7ec7\u540d\u79f0\uff01</p>"},{"location":"zh/eap-tls/setup/#pkcs12","title":"\u521b\u5efa PKCS#12 \u5ba2\u6237\u7aef\u8bc1\u4e66\uff08\u7528\u4e8e\u624b\u673a\u5bfc\u5165\uff09","text":"<pre><code>sudo openssl pkcs12 -export -inkey client.key -in client.crt -certfile ca.crt -out client.p12\n</code></pre>"},{"location":"zh/eap-tls/setup/#4-freeradius","title":"\ud83d\udccc 4. \u542f\u52a8 FreeRADIUS \u5e76\u6d4b\u8bd5","text":"<pre><code>sudo systemctl restart freeradius\nsudo journalctl -u freeradius -f\n</code></pre> <p>\u4f7f\u7528 <code>radtest</code> \u8fdb\u884c\u8ba4\u8bc1\u6d4b\u8bd5\uff1a</p> <pre><code>radtest user password 127.0.0.1 0 testing123\n</code></pre> <p>\u5982\u679c\u6210\u529f\uff0c\u5e94\u8be5\u8fd4\u56de <code>Access-Accept</code>\u3002</p>"},{"location":"zh/eap-tls/setup/#5","title":"\ud83d\udccc 5. \u8fde\u63a5\u65e0\u7ebf\u5ba2\u6237\u7aef","text":""},{"location":"zh/eap-tls/setup/#_4","title":"\u51c6\u5907\u5ba2\u6237\u7aef\u8bc1\u4e66","text":"<ol> <li>\u590d\u5236 <code>client.p12</code> \u548c <code>ca.crt</code> \u5230\u624b\u673a\uff08\u53ef\u4ee5\u4f7f\u7528 Google Drive\uff09\u3002</li> <li>\u5728 Android / iPhone \u4e0a\u5bfc\u5165\u8bc1\u4e66\uff1a</li> <li>\u8fdb\u5165 Wi-Fi \u9ad8\u7ea7\u8bbe\u7f6e\uff0c\u9009\u62e9 EAP-TLS \u8ba4\u8bc1\u3002</li> <li>\u9009\u62e9 <code>client.p12</code> \u4f5c\u4e3a\u5ba2\u6237\u7aef\u8bc1\u4e66\u3002</li> <li>\u9009\u62e9 <code>ca.crt</code> \u4f5c\u4e3a CA \u8bc1\u4e66\u3002</li> </ol>"},{"location":"zh/eap-tls/setup/#6","title":"\ud83d\udccc 6. \u914d\u7f6e\u8def\u7531\u5668","text":"<ol> <li>\u8fdb\u5165\u8def\u7531\u5668\u7ba1\u7406\u754c\u9762\u3002</li> <li>\u5728 \u65e0\u7ebf\u5b89\u5168 \u6216 \u9ad8\u7ea7\u8bbe\u7f6e \u4e2d\uff0c\u542f\u7528 WPA2-Enterprise\uff08EAP-TLS\uff09\u3002</li> <li>\u914d\u7f6e RADIUS \u670d\u52a1\u5668\u5730\u5740\uff1a</li> <li>RADIUS Server IP: <code>\u4f60\u7684 RADIUS \u670d\u52a1\u5668 IP</code></li> <li>Port: <code>1812</code></li> <li>Secret: <code>testing123</code> \uff08\u6b64\u5bc6\u7801\u5e94\u4e0e <code>clients.conf</code> \u6587\u4ef6\u4e2d\u7684 <code>secret</code> \u5b57\u6bb5\u4e00\u81f4\uff09</li> </ol> <p>\ud83d\udccc \u786e\u4fdd <code>clients.conf</code> \u6587\u4ef6\u4e2d\u7684 RADIUS \u5171\u4eab\u5bc6\u94a5\u4e00\u81f4</p> <pre><code>client your_router {\n    ipaddr = 192.168.51.2  # \u66ff\u6362\u4e3a\u4f60\u7684\u8def\u7531\u5668 IP\n    secret = testing123    # RADIUS \u5171\u4eab\u5bc6\u94a5\n    shortname = router     # \u7b80\u79f0\uff0c\u4fbf\u4e8e\u8bc6\u522b\n}\n</code></pre> <p>\u26a0\ufe0f \u6ce8\u610f\uff1a\u5982\u679c clients.conf \u4e2d\u7684 secret \u4e0e\u8def\u7531\u5668\u914d\u7f6e\u7684\u4e0d\u5339\u914d\uff0cRADIUS \u8ba4\u8bc1\u5c06\u5931\u8d25\uff01</p>"},{"location":"zh/eap-tls/setup/#7","title":"\ud83d\udd27 7. \u5e38\u89c1\u95ee\u9898\u4e0e\u89e3\u51b3\u65b9\u6848","text":""},{"location":"zh/eap-tls/setup/#eap-tls","title":"EAP-TLS \u8ba4\u8bc1\u5931\u8d25","text":"<pre><code>TLS Alert: unknown CA\n</code></pre> <p>\u89e3\u51b3\u65b9\u6cd5\uff1a - \u786e\u4fdd\u5ba2\u6237\u7aef\u5df2\u5bfc\u5165 <code>ca.crt</code>\u3002 - \u4f7f\u7528 <code>openssl verify -CAfile ca.crt server.crt</code> \u8fdb\u884c\u9a8c\u8bc1\u3002</p>"},{"location":"zh/eap-tls/setup/#freeradius","title":"FreeRADIUS \u65e0\u6cd5\u542f\u52a8","text":"<pre><code>Failed to start freeradius.service\n</code></pre> <p>\u89e3\u51b3\u65b9\u6cd5\uff1a</p> <pre><code>sudo systemctl restart freeradius\nsudo journalctl -u freeradius -f\n</code></pre>"},{"location":"zh/eap-tls/setup/#_5","title":"\u8bc1\u4e66\u8fc7\u671f","text":"<p>\u5982\u679c\u8bc1\u4e66\u65e0\u6548\uff0c\u6e05\u7406\u540e\u91cd\u65b0\u751f\u6210\uff1a</p> <pre><code>sudo rm /etc/freeradius/3.0/certs/*.crt\nsudo rm /etc/freeradius/3.0/certs/*.key\nsudo rm /etc/freeradius/3.0/certs/*.csr\nsudo rm /etc/freeradius/3.0/certs/*.srl\nbash scripts/generate_certs.sh\n</code></pre>"},{"location":"zh/eap-tls/setup/#license","title":"\ud83d\udcdc License","text":"<p>\u672c\u9879\u76ee\u57fa\u4e8e MIT License\uff0c\u6b22\u8fce\u81ea\u7531\u4f7f\u7528\u548c\u4fee\u6539\u3002\u5982\u9700\u5f15\u7528\u6216\u4e8c\u6b21\u5f00\u53d1\uff0c\u8bf7\u6ce8\u660e\u6765\u6e90\u3002</p>"},{"location":"zh/eap-tls/setup/#_6","title":"\ud83d\udcda \u53c2\u8003\u8d44\u6599","text":"<p>\u672c\u9879\u76ee\u7684\u5185\u5bb9\u57fa\u4e8e\u4ee5\u4e0b\u8d44\u6e90\uff1a - FreeRADIUS \u5b98\u65b9\u7f51\u7ad9: https://www.freeradius.org/ - NII \u5b66\u672f\u8ba4\u8bc1\u63a8\u8fdb\u5ba4 - Eduroam \u4e0e RADIUS \u76f8\u5173\u6587\u6863: NII MeatWiki</p>"},{"location":"zh/eap-tls/setup/#_7","title":"\ud83d\udce9 \u8054\u7cfb\u65b9\u5f0f","text":"<p>\u5982\u679c\u4f60\u6709\u4efb\u4f55\u95ee\u9898\u6216\u5efa\u8bae\uff0c\u53ef\u4ee5\u63d0\u4ea4 Issue \u53cd\u9988\uff0c\u6216\u8005\u8bbf\u95ee\u6211\u7684 GitHub \u4e3b\u9875\uff1a</p> <p>\ud83d\udd17 GitHub \u4e3b\u9875 </p> <p>\u5982\u679c\u89c9\u5f97\u672c\u9879\u76ee\u6709\u5e2e\u52a9\uff0c\u6b22\u8fce Star \u2b50 \u652f\u6301\uff01</p>"}]}